#!/usr/bin/env bash

GLOBIGNORE=".:..:.git"
shopt -u dotglob

# Install oh-my-zsh syntax highlighting
ZSH_SYNTAX_HIGHLIGHTING_PATH="${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting"
if [ ! -d "$ZSH_SYNTAX_HIGHLIGHTING_PATH" ]; then
	git clone https://github.com/zsh-users/zsh-syntax-highlighting.git "$ZSH_SYNTAX_HIGHLIGHTING_PATH"
fi

# Install dotfiles
cd "$(dirname "$0")" || exit
for f in .*; do
	TARGET="$HOME/$f"
	if [ -d "$TARGET" ] && [ -L "$TARGET" ]; then
		rm "$TARGET"
	fi
	ln -sfv "$(pwd)/$f" "$TARGET"
done

# Install Vim plugins
if vim +PlugInstall +qa; then
	echo "Installed Vim plugins"
else
	echo "Failed to install Vim plugins"
fi
