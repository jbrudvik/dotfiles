#!/usr/bin/env bash

rm_symlink_and_restore() {
  if [ -L "$1" ]; then
    rm -v "$1"
    
    if [ -f "$1.bak" ]; then
      mv -v "$1.bak" "$1"
    fi
  fi
}

# "Uninstall" dotfiles that are symlinks pointing at files in this directory
for f in .*; do
  if [ -f "$f" ]; then
    if [ -L "$HOME/$f" ]; then
      if [ "$(readlink $HOME/$f)" = "$(pwd)/$f" ]; then
        echo "Uninstalling $f"
        rm_symlink_and_restore "$f"
      fi
    fi
  fi
done

# TODO: Uncomment
# rm -rf ".oh-my-zsh"
# rm -rf ".vim/bundle/Vundle.vim"
